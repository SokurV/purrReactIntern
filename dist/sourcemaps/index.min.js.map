{"version":3,"sources":["index.js"],"names":["COOKIE_BLOCK","document","querySelector","COOKIE_BTN","BLOCK2","BLOCK2_IPHONE","BLOCK2_IPHONE_CENTER","IPHONE_CENTER_BACKGROUND","BLOCK2_TEXT_CONT","animate","timing","draw","duration","startTime","requestAnimationFrame","timestamp","timeFraction","progress","cookieAnimate","newBottom","style","bottom","block2Animation","block1Height","offsetHeight","block2Height","window","pageYOffset","Math","pow","block2ElementsHidden","removeEventListener","offset","left","right","opacity","display","justifyContent","block2IphoneCenter","setTimeout","onclick","classList","add","addEventListener"],"mappings":"AAAA,MAAMA,aAAeC,SAASC,cAAc,WACtCC,WAAaF,SAASC,cAAc,mBACpCE,OAASH,SAASC,cAAc,YAChCG,cAAgBJ,SAASC,cAAc,2BACvCI,qBAAuBL,SAASC,cAAc,2BAC9CK,yBAA2BN,SAASC,cAAc,6BAClDM,iBAAmBP,SAASC,cAAc,2BAiBhD,SAASO,SAAQC,OAACA,EAAMC,KAAEA,EAAIC,SAAEA,IAE5B,IAAIC,EAAY,KAEhBC,uBAAsB,SAASL,EAAQM,GAE/BF,IAAWA,EAAYE,GAC3B,IACIC,GADeD,EAAYF,GACGD,EAC9BI,EAAe,IAAGA,EAAe,GAGrC,IAAIC,EAAWP,EAAOM,GAEtBL,EAAKM,GAEDD,EAAe,GACfF,sBAAsBL,EAE9B,GACJ,CAEA,SAASS,cAAcD,GACnB,IAAIE,EAA4B,GAATF,EAAN,GACjBjB,aAAaoB,MAAMC,OAASF,EAAY,IAC5C,CAgBA,SAASG,kBACL,IAAIC,EAAetB,SAASC,cAAc,YAAYsB,aAClDC,EAAexB,SAASC,cAAc,YAAYsB,aACnDE,OAAOC,aAAeJ,EAAeE,EAAa,IACjDhB,QAAQ,CACJC,OAAQ,SAAcM,GAClB,OAAOY,KAAKC,IAAIb,EAAc,EAClC,EACAL,KAAMmB,qBACNlB,SAAU,MAEdc,OAAOK,oBAAoB,SAAUT,iBAE7C,CAEA,SAASQ,qBAAqBb,GAC1B,IAAIe,EAAkB,IAATf,EACbZ,cAAce,MAAMa,MAAQD,EAAS,KACrCxB,iBAAiBY,MAAMc,OAASF,EAAS,KACzCxB,iBAAiBY,MAAMe,QAAU,EAAa,EAATlB,EAClCA,GAAY,IACXZ,cAAce,MAAMgB,QAAU,OAC9B5B,iBAAiBY,MAAMgB,QAAU,OACjChC,OAAOgB,MAAMiB,eAAiB,SAC9B/B,qBAAqBc,MAAMgB,QAAU,OACrC3B,QAAQ,CACJC,OAAQ,SAAcM,GAClB,OAAOY,KAAKC,IAAIb,EAAc,EAClC,EACAL,KAAM2B,mBACN1B,SAAU,OAGtB,CAEA,SAAS0B,mBAAmBrB,GACxBX,qBAAqBc,MAAMa,KAAyB,IAAThB,EAAP,IAAsB,KAC1DX,qBAAqBc,MAAMe,QAAUlB,EAClCA,GAAY,IACXV,yBAAyBa,MAAMe,QAAU,GAEjD,CAvDAI,YAAW,KACP9B,QAAQ,CACJC,OAAQ,SAAcM,GAClB,OAAOY,KAAKC,IAAIb,EAAc,EAClC,EACAL,KAAMO,cACNN,SAAU,KACb,GACF,KAEHT,WAAWqC,QAAU,WACjBxC,aAAayC,UAAUC,IAAI,sBAC/B,EA6CAhB,OAAOiB,iBAAiB,SAAUrB","file":"../js/index.min.js","sourcesContent":["const COOKIE_BLOCK = document.querySelector('.cookie')\r\nconst COOKIE_BTN = document.querySelector('.cookie__button')\r\nconst BLOCK2 = document.querySelector('.block-2')\r\nconst BLOCK2_IPHONE = document.querySelector('.block-2__iphone-hidden')\r\nconst BLOCK2_IPHONE_CENTER = document.querySelector('.block-2__iphone-center')\r\nconst IPHONE_CENTER_BACKGROUND = document.querySelector('.iphone-center-background')\r\nconst BLOCK2_TEXT_CONT = document.querySelector('.block-2-text-container')\r\n/* let startTime = null\r\n\r\nfunction cookieAnimate(timestamp){\r\n    if(!startTime) startTime = timestamp\r\n    let progress = timestamp - startTime\r\n    let newBottom = (-92 + ((progress)/1000)*46)\r\n    COOKIE_BLOCK.style.bottom = newBottom + \"px\"\r\n    if(newBottom < 0) {\r\n        requestAnimationFrame(cookieAnimate)\r\n    }\r\n}\r\nsetTimeout(() => {\r\n    requestAnimationFrame(cookieAnimate)\r\n}, 3000); */\r\n\r\n\r\nfunction animate({timing, draw, duration}) {\r\n\r\n    let startTime = null\r\n  \r\n    requestAnimationFrame(function animate(timestamp) {\r\n      // timeFraction изменяется от 0 до 1\r\n        if(!startTime) startTime = timestamp\r\n        let progressTime = timestamp - startTime\r\n        let timeFraction = progressTime / duration\r\n        if (timeFraction > 1) timeFraction = 1\r\n    \r\n        // вычисление текущего состояния анимации\r\n        let progress = timing(timeFraction)\r\n    \r\n        draw(progress); // отрисовать её\r\n    \r\n        if (timeFraction < 1) {\r\n            requestAnimationFrame(animate)\r\n        }\r\n    })\r\n}\r\n\r\nfunction cookieAnimate(progress) {\r\n    let newBottom = -92 + (progress*92)\r\n    COOKIE_BLOCK.style.bottom = newBottom + \"px\"\r\n}\r\n\r\nsetTimeout(()=>{\r\n    animate({\r\n        timing: function quad(timeFraction) {\r\n            return Math.pow(timeFraction, 2)\r\n        },\r\n        draw: cookieAnimate,\r\n        duration: 1000\r\n    })\r\n}, 3000)\r\n\r\nCOOKIE_BTN.onclick = function(){\r\n    COOKIE_BLOCK.classList.add('cookie_display-none')\r\n}\r\n\r\nfunction block2Animation(){\r\n    let block1Height = document.querySelector('.block-1').offsetHeight\r\n    let block2Height = document.querySelector('.block-2').offsetHeight\r\n    if(window.pageYOffset >= block1Height + block2Height/2) {\r\n        animate({\r\n            timing: function quad(timeFraction) {\r\n                return Math.pow(timeFraction, 2)\r\n            },\r\n            draw: block2ElementsHidden,\r\n            duration: 2000\r\n        })\r\n        window.removeEventListener(\"scroll\", block2Animation)\r\n    }\r\n}\r\n\r\nfunction block2ElementsHidden(progress) {\r\n    let offset = progress*1000\r\n    BLOCK2_IPHONE.style.left = -offset + \"px\"\r\n    BLOCK2_TEXT_CONT.style.right = -offset + \"px\"\r\n    BLOCK2_TEXT_CONT.style.opacity = 1 - progress*2\r\n    if(progress >= 1) {\r\n        BLOCK2_IPHONE.style.display = 'none'\r\n        BLOCK2_TEXT_CONT.style.display = 'none'\r\n        BLOCK2.style.justifyContent = 'center'\r\n        BLOCK2_IPHONE_CENTER.style.display = 'flex'\r\n        animate({\r\n            timing: function quad(timeFraction) {\r\n                return Math.pow(timeFraction, 2)\r\n            },\r\n            draw: block2IphoneCenter,\r\n            duration: 1500\r\n        })\r\n    }\r\n}\r\n\r\nfunction block2IphoneCenter(progress) {\r\n    BLOCK2_IPHONE_CENTER.style.left = (-1000 + progress*1000)+\"px\"\r\n    BLOCK2_IPHONE_CENTER.style.opacity = progress\r\n    if(progress >= 1) {\r\n        IPHONE_CENTER_BACKGROUND.style.opacity = 0.2\r\n    }\r\n}\r\n\r\nwindow.addEventListener(\"scroll\", block2Animation)"]}